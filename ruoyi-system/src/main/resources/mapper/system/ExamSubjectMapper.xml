<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.ExamSubjectMapper">

	<resultMap type="ExamSubject" id="ExamSubjectResult">
		<id     property="subjectId"      column="subject_id"       />
		<result property="subjectName"    column="subject_name"     />
		<result property="subjectCode"    column="subject_code"     />
		<result property="description"    column="description"      />
		<result property="status"         column="status"           />
		<result property="sortOrder"      column="sort_order"       />
		<result property="createBy"       column="create_by"        />
		<result property="createTime"     column="create_time"      />
		<result property="updateBy"       column="update_by"        />
		<result property="updateTime"     column="update_time"      />
		<result property="remark"         column="remark"           />
	</resultMap>
	
	<sql id="selectExamSubjectVo">
        select subject_id, subject_name, subject_code, description, status, sort_order, 
               create_by, create_time, update_by, update_time, remark 
		from exam_subject
    </sql>
	
	<select id="selectExamSubjectList" parameterType="ExamSubject" resultMap="ExamSubjectResult">
	    <include refid="selectExamSubjectVo"/>
		<where>
			<if test="subjectName != null and subjectName != ''">
				AND subject_name like concat('%', #{subjectName}, '%')
			</if>
			<if test="subjectCode != null and subjectCode != ''">
				AND subject_code like concat('%', #{subjectCode}, '%')
			</if>
			<if test="status != null and status != ''">
				AND status = #{status}
			</if>
		</where>
		order by sort_order, subject_id
	</select>
	
	<select id="selectExamSubjectAll" resultMap="ExamSubjectResult">
		<include refid="selectExamSubjectVo"/>
		where status = '0'
		order by sort_order, subject_id
	</select>
	
	<select id="selectExamSubjectById" parameterType="Long" resultMap="ExamSubjectResult">
		<include refid="selectExamSubjectVo"/>
		where subject_id = #{subjectId}
	</select>
	
	<select id="checkSubjectNameUnique" parameterType="String" resultMap="ExamSubjectResult">
		<include refid="selectExamSubjectVo"/>
		where subject_name = #{subjectName} limit 1
	</select>
	
	<select id="checkSubjectCodeUnique" parameterType="String" resultMap="ExamSubjectResult">
		<include refid="selectExamSubjectVo"/>
		where subject_code = #{subjectCode} limit 1
	</select>
	
	<insert id="insertExamSubject" parameterType="ExamSubject" useGeneratedKeys="true" keyProperty="subjectId">
 		insert into exam_subject(
 			<if test="subjectName != null and subjectName != ''">subject_name,</if>
 			<if test="subjectCode != null and subjectCode != ''">subject_code,</if>
 			<if test="description != null and description != ''">description,</if>
 			<if test="status != null and status != ''">status,</if>
 			<if test="sortOrder != null">sort_order,</if>
 			<if test="remark != null and remark != ''">remark,</if>
 			<if test="createBy != null and createBy != ''">create_by,</if>
 			create_time
 		)values(
 			<if test="subjectName != null and subjectName != ''">#{subjectName},</if>
 			<if test="subjectCode != null and subjectCode != ''">#{subjectCode},</if>
 			<if test="description != null and description != ''">#{description},</if>
 			<if test="status != null and status != ''">#{status},</if>
 			<if test="sortOrder != null">#{sortOrder},</if>
 			<if test="remark != null and remark != ''">#{remark},</if>
 			<if test="createBy != null and createBy != ''">#{createBy},</if>
 			sysdate()
 		)
	</insert>
	
	<update id="updateExamSubject" parameterType="ExamSubject">
 		update exam_subject
 		<set>
 			<if test="subjectName != null and subjectName != ''">subject_name = #{subjectName},</if>
 			<if test="subjectCode != null and subjectCode != ''">subject_code = #{subjectCode},</if>
 			<if test="description != null">description = #{description},</if>
 			<if test="status != null and status != ''">status = #{status},</if>
 			<if test="sortOrder != null">sort_order = #{sortOrder},</if>
 			<if test="remark != null">remark = #{remark},</if>
 			<if test="updateBy != null and updateBy != ''">update_by = #{updateBy},</if>
 			update_time = sysdate()
 		</set>
 		where subject_id = #{subjectId}
	</update>
	
	<delete id="deleteExamSubjectById" parameterType="Long">
		delete from exam_subject where subject_id = #{subjectId}
	</delete>
	
	<delete id="deleteExamSubjectByIds" parameterType="Long">
 		delete from exam_subject where subject_id in
 		<foreach collection="array" item="subjectId" open="(" separator="," close=")">
 			#{subjectId}
        </foreach> 
 	</delete>

</mapper>
